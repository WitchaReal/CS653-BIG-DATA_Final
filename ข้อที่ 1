‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô! ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠ **‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà 1 ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î** ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏î‡πâ‡∏ß‡∏¢ **‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Query ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Athena** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏°‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£

---

## üß© ‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà 1: Upload + Glue Crawler + Athena

### üéØ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢:

* ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå `customers.csv` ‡πÑ‡∏õ‡∏ó‡∏µ‡πà S3
* ‡∏™‡∏£‡πâ‡∏≤‡∏á Glue Database ‡πÅ‡∏•‡∏∞ Crawler ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πá‡∏ö schema ‡πÄ‡∏Ç‡πâ‡∏≤ Data Catalog
* ‡πÉ‡∏ä‡πâ Athena Query ‡∏´‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® `Thailand`
* ‡∏™‡πà‡∏á Capture 1 ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡πÄ‡∏´‡πá‡∏ô:

  * Crawler = Ready
  * ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏≤‡∏Å Athena ‡∏ó‡∏µ‡πà filter `country = 'Thailand'`

---

## ‚úÖ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: Upload customers.csv ‡πÑ‡∏õ‡∏¢‡∏±‡∏á S3

1. ‡πÄ‡∏Ç‡πâ‡∏≤ AWS Console ‚Üí S3 ‚Üí \[Create bucket]

2. ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠ bucket:

   ```
   student6196-YYYY-customers
   ```

   (‡πÄ‡∏ä‡πà‡∏ô student6196-1234-customers)

3. ‡πÄ‡∏õ‡∏¥‡∏î bucket ‚Üí ‡∏Å‡∏î \[Create folder] ‚Üí ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠: `csv`

4. ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå `csv` ‚Üí ‡∏Å‡∏î \[Upload] ‚Üí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå `customers.csv` ‚Üí ‡∏Å‡∏î \[Upload]

---

## ‚úÖ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏™‡∏£‡πâ‡∏≤‡∏á Glue Database

1. ‡πÄ‡∏õ‡∏¥‡∏î AWS Console ‚Üí Glue ‚Üí ‡∏Å‡∏î‡πÄ‡∏°‡∏ô‡∏π `Databases` (‡πÉ‡∏ô‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ Data Catalog)
2. ‡∏Å‡∏î \[Add database] ‚Üí ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤:

   ```
   customers_6196_YYYY
   ```

   (‡πÄ‡∏ä‡πà‡∏ô customers\_6196\_1234) ‚Üí \[Create database]

---

## ‚úÖ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏™‡∏£‡πâ‡∏≤‡∏á Glue Crawler

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Glue ‚Üí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å `Crawlers` ‚Üí \[Create crawler]

2. ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠:

   ```
   crawler-customers-6196-YYYY
   ```

3. Data source:

   * Data store: S3
   * Include path: `s3://student6196-YYYY-customers/csv/`

4. IAM role: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å `LabRole` ‡∏´‡∏£‡∏∑‡∏≠ role ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥

5. Output:

   * Database: `customers_6196_YYYY`
   * Table prefix: `customers_` (‡πÉ‡∏™‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏Å‡πá‡πÑ‡∏î‡πâ)

6. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à ‚Üí ‡∏Å‡∏î Run ‚Üí ‡∏£‡∏≠‡∏à‡∏ô Crawler ‡πÄ‡∏õ‡πá‡∏ô ‚Äú**Ready**‚Äù

---

## ‚úÖ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: ‡πÉ‡∏ä‡πâ Athena Query ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

1. ‡πÄ‡∏õ‡∏¥‡∏î Athena ‚Üí ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Region ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö S3 ‡πÅ‡∏•‡∏∞ Glue

2. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Query results location (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô):

   * ‡∏Å‡∏î Settings ‚Üí Manage ‚Üí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å S3 ‡πÄ‡∏ä‡πà‡∏ô:

     ```
     s3://studentXXXX-YYYY-customers/athena-results/
     ```

3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Database: `customers_6196_YYYY` (‡πÄ‡∏°‡∏ô‡∏π‡∏ã‡πâ‡∏≤‡∏¢)

4. ‡∏Ñ‡∏•‡∏¥‡∏Å \[New Query] ‚Üí ‡∏û‡∏¥‡∏°‡∏û‡πå SQL ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ:

```sql
SELECT * 
FROM customers.csv
WHERE country = 'Thailand';
```

> ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `customers_xxxx_yyyy` ‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏à‡∏£‡∏¥‡∏á ‡πÄ‡∏ä‡πà‡∏ô `customers_6196_1234`

5. ‡∏Å‡∏î \[Run] ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏≠‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå

---

## ‚úÖ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 5: Capture ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠

üì∏ ‡∏†‡∏≤‡∏û‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ:

* Glue Crawler ‡∏ó‡∏µ‡πà‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡πá‡∏ô ‚Äú**Ready**‚Äù
* ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏≤‡∏Å Athena ‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® `Thailand`


